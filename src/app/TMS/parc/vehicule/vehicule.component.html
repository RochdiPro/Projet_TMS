<div class="app-page-title">
   <div class="page-title-wrapper">
      <div class="page-title-heading">
         <div class="page-title-icon">
            <i class="pe-7s-car text-success">
            </i>
         </div>
         Véhicule
      </div>
   </div>
</div>
<div class="tab-content">
   <div class="tab-pane tabs-animation fade show active" id="tab-content-0" role="tabpanel">
      <div class="main-card mb-3 card">
         <div class="card-body">
            <button mat-mini-fab color="primary" class="mt-1 mr-2 float-right" (click)="ouvrirAjouterVehicule()">
               <mat-icon>add</mat-icon>
            </button>
            <div class="row">
               
               <form [formGroup]="form">
               <mat-form-field class="ml-3 custom-width">
                  <mat-label>Carburant</mat-label>
                  <mat-select formControlName="carb" name="carburant" id="carburant" [(value)]="carburant" (selectionChange)="selectionnerCarburant()" required>
                     <mat-option value="Essence">
                        Essence
                     </mat-option>
                     <mat-option value="Diesel">
                        Diesel
                     </mat-option>
                     <mat-option value="GPL">
                        GPL
                     </mat-option>
                  </mat-select>
               </mat-form-field>
               <mat-form-field class="ml-3 custom-width">
                  <mat-label>Prix Carburant</mat-label>
                  <input matInput formControlName="prix" name="prix" id="prix" type="text">
                  <mat-error *ngIf="form.controls['prix'].hasError('required')">
                     Champ <strong>Obligatoire</strong>
                  </mat-error>
                  <mat-error *ngIf="form.controls['prix'].hasError('pattern')">
                     Seuls les <strong>chiffres</strong> sont autorisés
                  </mat-error>
               </mat-form-field>
               <button mat-mini-fab color="primary" class="mb-2 ml-2" (click)="miseAJourCarburant()" [disabled]="form.invalid">
                  <i class="fas fa-gas-pump"></i>
               </button>
            </form>
            
            </div>
            <table class="mb-0 table">
               <thead>
                  <tr>
                     <th style="text-align:center">Vehicule</th>
                     <th style="text-align:center">Categories Permis Accordées</th>
                     <th style="text-align:center">Km Actuel</th>
                     <th style="text-align:center">Prochain Entretien Dans</th>
                     <th style="text-align:center">Disponibilité</th>
                     <th style="text-align:center"></th>
            
                  </tr>
               </thead>
               <tbody>
                  <tr *ngFor="let vehicule of vehicules">
                     <th scope="row" style="text-align:center">{{vehicule.matricule}}</th>
                     <td style="text-align:center">
                        <p class="mt-2" *ngIf="vehicule.categories === 'A/A1/B/B+E/C/C+E/D/D1/D+E/H';">DEUX ROUES</p>
                        <p class="mt-2" *ngIf="vehicule.categories === 'B/B+E/C/C+E/D/D1/D+E/H';">VOITURES PARTICULIÈRES</p>
                        <p class="mt-2" *ngIf="vehicule.categories === 'C/C+E';">POIDS LOURDS</p>
                        <p class="mt-2" *ngIf="vehicule.categories === 'C+E';">POIDS LOURDS ARTICULÉS</p>
                     </td>
                     <td style="text-align:center">{{vehicule.kmactuel}}</td>
                     <td style="text-align:center">{{vehicule.kmprochainentretien-vehicule.kmactuel}}</td>
                     <td style="text-align:center" [ngClass]="{'disponible': vehicule.etatVehicule === 'Disponible', 'enMission': vehicule.etatVehicule === 'En Mission'}">{{vehicule.etatVehicule}}</td>
                     <td>
                        <button class="mb-2  btn " (click)="ouvrirNotifications(vehicule.id, vehicule.sujet, vehicule.description)"><i
                              class="fas fa-bell" matBadge="&#8288;" matBadgeColor="warn"
                              [matBadgeHidden]="afficherBadgeDeNotification(vehicule.kmprochainentretien-vehicule.kmactuel,vehicule.sujet,vehicule.datevisite,vehicule.dateassurance,vehicule.datetaxe)"></i></button>
                        <button class="mb-2  btn " (click)="ouvrirReclamation(vehicule.id)"><i
                              class="fas fa-exclamation-triangle"></i></button>
                        <button class="mb-2  btn " (click)="ouvrirDetailVehicule(vehicule.id)"><i class="fas fa-eye"></i></button>
                        <button class="mb-2  btn " (click)="ouvrirMiseAJourVehicule(vehicule.id,vehicule.categories)"><i
                              class="fas fa-edit"></i></button>
                        <button class="mb-2  btn " (click)="ouvrirMiseAJourConsommation(vehicule.id,vehicule.kmactuel)"><i
                              class="fas fa-gas-pump"></i></button>
                        <button class="mb-2  btn " (click)="supprimerVehicule(vehicule.id)"><i class="fas fa-trash-alt" style="color: #ff0000;"></i>
            
                        </button>
                     </td>
            
            
                  </tr>
            
               </tbody>
            </table>
            
         </div>
      </div>
   </div>
</div>
